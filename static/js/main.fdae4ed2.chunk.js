(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),l=a.n(i),o=(a(13),a(1)),s=a(2),c=a(4),d=a(3),u=a(5),m=(a(15),a(17),function(){return r.a.createElement("div",{id:"header"},r.a.createElement("h1",null,"Customer Portal"))}),p=(a(19),function(e){var t=e.app;return r.a.createElement("div",{id:"loginForm"},r.a.createElement("div",{className:"div-under-loginForm"},r.a.createElement("label",{className:"label",htmlFor:"emailField"},"Email"),r.a.createElement("input",{type:"email",name:"emailField",id:"emailField"}),r.a.createElement("label",{className:"label",htmlFor:"passwordField"},"Password"),r.a.createElement("input",{type:"password",name:"passwordField",id:"passwordField"}),r.a.createElement("input",{onClick:function(){return function(e){var t=document.getElementById("emailField").value,a=document.getElementById("passwordField").value;fetch("https://customerportalgb.herokuapp.com/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})}).then(function(e){return e.json()}).then(function(t){t.token?(localStorage.setItem("token",t.token),e.setState(t)):alert("Wrong Credentials!")})}(t)},type:"submit",value:"Login",className:"submitButton"})))}),h=(a(21),a(23),function(){var e=document.getElementById("basicInfoEmailField").value,t=document.getElementById("nameField").value,a=document.getElementById("addressField").value,n=document.getElementById("cityField").value,r=document.getElementById("countryField").value;fetch("https://customerportalgb.herokuapp.com/customers",{method:"PUT",headers:{authorization:"Bearer ".concat(localStorage.token),"Content-Type":"application/json"},body:JSON.stringify({email:e,name:t,address:a,city:n,country:r})}).then(function(e){return e.json()}).then(function(e){e.name?window.location.reload():alert("Ooops! Something went wrong. Try again!")})}),g=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onEmailChange=function(e){a.setState({email:e.target.value})},a.onNameChange=function(e){a.setState({name:e.target.value})},a.onAddressChange=function(e){a.setState({address:e.target.value})},a.onCityChange=function(e){a.setState({city:e.target.value})},a.onCountryChange=function(e){a.setState({country:e.target.value})};var n=e.app;return a.state={email:n.email,name:n.name,address:n.address,city:n.city,country:n.country},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.name,n=e.address,i=e.city,l=e.country;return r.a.createElement("div",{id:"basicInfo",className:"white-bg"},r.a.createElement("p",null,"Basic Info"),r.a.createElement("div",{className:"div-under-basicInfo"},r.a.createElement("label",{htmlFor:"basicInfoEmailField"},"Email"),r.a.createElement("input",{onChange:this.onEmailChange,type:"email",name:"basicInfoEmailField",id:"basicInfoEmailField",value:t}),r.a.createElement("label",{htmlFor:"nameField"},"Name"),r.a.createElement("input",{onChange:this.onNameChange,type:"text",name:"nameField",id:"nameField",value:a}),r.a.createElement("label",{htmlFor:"addressField"},"Address"),r.a.createElement("input",{onChange:this.onAddressChange,type:"text",name:"addressField",id:"addressField",value:n}),r.a.createElement("label",{htmlFor:"cityField"},"City"),r.a.createElement("input",{onChange:this.onCityChange,type:"text",name:"cityField",id:"cityField",value:i}),r.a.createElement("label",{htmlFor:"countryField"},"Country"),r.a.createElement("input",{onChange:this.onCountryChange,type:"text",name:"countryField",id:"countryField",value:l}),r.a.createElement("input",{onClick:h,type:"submit",value:"Save",className:"saveButton"})))}}]),t}(n.Component),E=(a(25),function(e){var t=e.target,a=t.id.split(" ")[1];fetch("https://customerportalgb.herokuapp.com/passengers",{method:"DELETE",headers:{authorization:"Bearer ".concat(localStorage.token),"Content-Type":"application/json"},body:JSON.stringify({id:a})}).then(function(e){return e.json()}).then(function(e){return"Success"===e?void(a=t).parentNode.parentNode.parentNode.removeChild(a.parentNode.parentNode):void alert("Error deleting passenger!");var a})}),v=function(e){var t=e.id,a=e.title,n=e.firstName,i=e.surname,l=e.passportId;return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,i),r.a.createElement("td",null,l),r.a.createElement("td",null,r.a.createElement("button",{onClick:E,id:"p ".concat(t),className:"deleteButton"},"Delete")),r.a.createElement("td",{className:"lastCol"}))},f=function(e){var t=e.passengersList,a=e.onAddPassengerClick,n=t.map(function(e){return r.a.createElement(v,{key:e.passengerid,id:e.passengerid,title:e.title,firstName:e.firstname,surname:e.surname,passportId:e.passportid})});return r.a.createElement("div",{id:"passengers",className:"white-bg"},r.a.createElement("p",null,"Passengers"),r.a.createElement("table",{id:"table-passengers"},r.a.createElement("tbody",{className:"passengersTBody"},r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Surname"),r.a.createElement("th",null,"Pastport ID"),r.a.createElement("th",null,"Options"),r.a.createElement("td",{className:"lastCol"})),n)),r.a.createElement("button",{onClick:a,className:"addButton"},"Add"))},C=(a(27),function(e){var t=e.id,a=e.departureAirport,n=e.destinationAirport,i=e.departureTime,l=e.arrivalTime,o=e.passengers;o=o.join(", ");return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,i),r.a.createElement("td",null,l),r.a.createElement("td",null,o),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(e){var t=e.target,a=t.id.split(" ")[1];fetch("https://customerportalgb.herokuapp.com/trips",{method:"DELETE",headers:{authorization:"Bearer ".concat(localStorage.token),"Content-Type":"application/json"},body:JSON.stringify({trip_id:a})}).then(function(e){return e.json()}).then(function(e){return"Success"===e?void(a=t).parentNode.parentNode.parentNode.removeChild(a.parentNode.parentNode):void alert("Error deleting trip!");var a})},id:"t ".concat(t),className:"deleteButton"},"Delete")))}),b=function(e){var t=e.tripsList,a=e.onAddTripClick,n=t.map(function(e){return r.a.createElement(C,{key:e.trip_id,id:e.trip_id,departureAirport:e.departure_airport,destinationAirport:e.destination_airport,departureTime:e.departure_time,arrivalTime:e.arrival_time,passengers:e.passengers})});return r.a.createElement("div",{id:"trips",className:"white-bg"},r.a.createElement("p",null,"Trips"),r.a.createElement("table",{id:"table-trips"},r.a.createElement("tbody",{className:"tripsTBody"},r.a.createElement("tr",null,r.a.createElement("th",null,"From"),r.a.createElement("th",null,"To"),r.a.createElement("th",null,"Departure"),r.a.createElement("th",null,"Arrival"),r.a.createElement("th",null,"Passengers"),r.a.createElement("th",null,"Options")),n)),r.a.createElement("button",{onClick:a,className:"addButton"},"Add"))},y=(a(29),function(e){var t=e.title,a=e.firstName,n=e.surname,i=e.onPassengerCheck,l="".concat(t,"-").concat(a,"-").concat(n);return r.a.createElement("div",null,r.a.createElement("input",{onChange:i,type:"checkbox",id:l,name:l,value:"".concat(t," ").concat(a," ").concat(n)}),"".concat(t," ").concat(a," ").concat(n),r.a.createElement("br",null))}),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onPassengerCheck=function(e){var t=a.state.passengersList;e.target.checked?t.push(e.target.value):t.splice(t.indexOf(e.target.value),1),a.setState({passengersList:t})},a.onDepartureAirportChange=function(e){a.setState({departure_airport:e.target.value})},a.onDestinationAirportChange=function(e){a.setState({destination_airport:e.target.value})},a.onDepartureDateChange=function(e){a.setState({departureDate:e.target.value})},a.onDepartureTimeChange=function(e){a.setState({departureTime:e.target.value})},a.onArrivalDateChange=function(e){a.setState({arrivalDate:e.target.value})},a.onArrivalTimeChange=function(e){a.setState({arrivalTime:e.target.value})},a.handleAddTrip=function(){var e=a.state,t=e.departure_airport,n=e.destination_airport,r=e.departureDate,i=e.departureTime,l=e.arrivalDate,o=e.arrivalTime,s=e.passengersList,c="".concat(r," ").concat(i),d="".concat(l," ").concat(o);fetch("https://customerportalgb.herokuapp.com/trips",{method:"POST",headers:{authorization:"Bearer ".concat(localStorage.token),"Content-Type":"application/json"},body:JSON.stringify({departure_airport:t,destination_airport:n,departure_time:c,arrival_time:d,passengers:s})}).then(function(e){return e.json()}).then(function(e){e[0].passengers?window.location.reload():alert("Unable to add the trip! Try again!")})},a.state={passengersList:[]},a.passengersCheckBoxArray=e.passengersList.map(function(e){return r.a.createElement(y,{key:e.passengerid,title:e.title,firstName:e.firstname,surname:e.surname,onPassengerCheck:a.onPassengerCheck})}),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"addTrip"},r.a.createElement("p",{className:"add-trip-P"},"Add trip"),r.a.createElement("div",{className:"div-under-addTrip"},r.a.createElement("label",{htmlFor:"departureAirport"},"Departure airport"),r.a.createElement("input",{onChange:this.onDepartureAirportChange,type:"text",name:"departureAirport",id:"departureAirport"}),r.a.createElement("label",{htmlFor:"destinationAirport"},"Destination airport"),r.a.createElement("input",{onChange:this.onDestinationAirportChange,type:"text",name:"destinationAirport",id:"destinationAirport"}),r.a.createElement("label",{htmlFor:"departureDate"},"Departure date"),r.a.createElement("input",{onChange:this.onDepartureDateChange,type:"date",name:"departureDate",id:"departureDate"}),r.a.createElement("label",{htmlFor:"departureTime"},"Departure time"),r.a.createElement("input",{onChange:this.onDepartureTimeChange,type:"time",name:"departureTime",id:"departureTime"}),r.a.createElement("label",{htmlFor:"arrivalDate"},"Arrival date"),r.a.createElement("input",{onChange:this.onArrivalDateChange,type:"date",name:"arrivalDate",id:"arrivalDate"}),r.a.createElement("label",{htmlFor:"arrivalTime"},"Arrival time"),r.a.createElement("input",{onChange:this.onArrivalTimeChange,type:"time",name:"arrivalTime",id:"arrivalTime"})),r.a.createElement("div",{className:"passengers"},r.a.createElement("label",{htmlFor:"passengersCheckBoxList"},"Passengers: "),r.a.createElement("div",{id:"passengersCheckBoxList"},this.passengersCheckBoxArray,r.a.createElement("button",{onClick:this.handleAddTrip,className:"saveButtonTrip"},"Save"))),r.a.createElement("button",{onClick:this.props.onCancelAddTripClick,className:"cancelTripButton"},"Cancel"))}}]),t}(n.Component),F=(a(31),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onTitleChange=function(e){a.setState({title:e.target.value})},a.onFirstNameChange=function(e){a.setState({firstname:e.target.value})},a.onSurnameChange=function(e){a.setState({surname:e.target.value})},a.onPassportIdChange=function(e){a.setState({passportid:e.target.value})},a.handleAddPassenger=function(){var e=a.state,t=e.title,n=e.firstname,r=e.surname,i=e.passportid;fetch("https://customerportalgb.herokuapp.com/passengers",{method:"POST",headers:{authorization:"Bearer ".concat(localStorage.token),"Content-Type":"application/json"},body:JSON.stringify({title:t,firstname:n,surname:r,passportid:i})}).then(function(e){return e.json()}).then(function(e){e[0].title?window.location.reload():alert("Unable to add the passenger! Check the data and try again!")})},a.state={title:"Mr"},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"addPassenger"},r.a.createElement("p",{className:"add-Passenger-P"},"Add passenger"),r.a.createElement("div",{className:"div-under-addPassenger"},r.a.createElement("label",{htmlFor:"titleSelect"},"Title"),r.a.createElement("select",{onChange:this.onTitleChange,name:"titleSelect",id:"titleSelect"},r.a.createElement("option",{value:"Mr"},"Mr"),r.a.createElement("option",{value:"Mrss"},"Mrs"),r.a.createElement("option",{value:"Miss"},"Miss"),r.a.createElement("option",{value:"Ms"},"Ms")),r.a.createElement("label",{htmlFor:"firstNameField"},"Firstname"),r.a.createElement("input",{onChange:this.onFirstNameChange,type:"text",name:"firstNameField",id:"firstNameField"}),r.a.createElement("label",{htmlFor:"surnameField"},"Surname"),r.a.createElement("input",{onChange:this.onSurnameChange,type:"text",name:"surnameField",id:"surnameField"}),r.a.createElement("label",{htmlFor:"passportID"},"Passport ID"),r.a.createElement("input",{onChange:this.onPassportIdChange,type:"text",name:"passportID",id:"passportID"}),r.a.createElement("button",{onClick:this.handleAddPassenger,className:"addPassengerButton"},"Add")),r.a.createElement("button",{onClick:this.props.onCancelAddPassengerClick,className:"cancelButton"},"Cancel"))}}]),t}(n.Component)),T=function(e){var t=e.app;return r.a.createElement("div",{id:"customerDetailsPage"},r.a.createElement(g,{app:t.state.customer}),r.a.createElement(f,{passengersList:t.state.passengers,onAddPassengerClick:t.onAddPassengerClick}),t.state.addPassengerWindow?r.a.createElement(F,{onCancelAddPassengerClick:t.onCancelAddPassengerClick}):null,r.a.createElement(b,{tripsList:t.state.trips,onAddTripClick:t.onAddTripClick}),t.state.addTripWindow?r.a.createElement(k,{passengersList:t.state.passengers,onCancelAddTripClick:t.onCancelAddTripClick}):null)},N=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).onAddPassengerClick=function(){e.setState({addPassengerWindow:!0})},e.onCancelAddPassengerClick=function(){e.setState({addPassengerWindow:!1})},e.onAddTripClick=function(){e.setState({addTripWindow:!0})},e.onCancelAddTripClick=function(){e.setState({addTripWindow:!1})},e.componentDidMount=function(){if(localStorage.token){var t="Bearer ".concat(localStorage.token);fetch("https://customerportalgb.herokuapp.com/auth",{headers:{authorization:t}}).then(function(e){return e.json()}).then(function(t){return e.setState(t)})}},e.state={},fetch("https://customerportalgb.herokuapp.com"),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),localStorage.token?null:r.a.createElement(p,{app:this}),this.state.customer?r.a.createElement(T,{app:this}):null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[8,2,1]]]);
//# sourceMappingURL=main.fdae4ed2.chunk.js.map